---

hostname: db1
domain: local.lab
binaries_url: http://repo01/binaries

role_separation: true
oracle_user: oracle
grid_user: grid
oracle_inventory_group: oinstall

oracle_sid: orcl
oracle_uniquename: "{{ oracle_sid }}"
oracle_global_name: "{{ oracle_sid }}"
sys_password: oracle1
system_password: oracle1
oracle_base: /u01/app/oracle
oracle_version: 12.2.0
oracle_home: "{{ oracle_base }}/product/{{ oracle_version }}/dbhome_1"
sga_target: 600M
pga_aggregate_target: 100M
oracle_pdb: edb
oracle_pdb_admin: admin
oracle_pdb_admin_pw: oracle1

jdk_file: jdk-8u144-linux-x64.rpm
jdk_file_sha256: cdb016da0c509d7414ee3f0c15b2dae5092d9a77edf7915be4386d5127e8092f

oracle_database:
  file_name: linuxx64_12201_database.zip
  checksum: 4170261901
  sha256: 96ed97d21f15c1ac0cce3749da6c3dac7059bb60672d76b008103fc754d22dde

grid_infrastructure: linuxx64_12201_grid_home.zip
grid_infrastructure_checksum: 1523222538

oracle_gsm: linuxx64_12201_gsm.zip
oracle_gsm_checksum: 1199547259

oracle_seclimits:
  - { name: 'soft nproc', value: 16384 }
  - { name: 'hard nproc', value: 16384 }
  - { name: 'soft nofile', value: 4096 }
  - { name: 'hard nofile', value: 65536 }
  - { name: 'soft stack', value: 10240 }
  - { name: 'hard stack', value: 32768 }
  - { name: 'soft memlock', value: "{{ ((0.9 * ansible_memtotal_mb)*1024)|round|int }}" }
  - { name: 'hard memlock', value: "{{ ((0.9 * ansible_memtotal_mb)*1024)|round|int }}" }

oracle_packages_old:
  - compat-libstdc++-33.i686
  - compat-libstdc++-33
  - tuned-profiles-oracle

oracle_packages:
  - binutils
  - compat-libcap1
  - glibc.i686
  - glibc
  - glibc-devel.i686
  - glibc-devel
  - ksh
  - libaio.i686
  - libaio
  - libaio-devel.i686
  - libaio-devel
  - libX11.i686
  - libX11
  - libXau.i686
  - libXau
  - libXi.i686
  - libXi
  - libXtst.i686
  - libXtst
  - libgcc.i686
  - libgcc
  - libstdc++.i686
  - libstdc++
  - libstdc++-devel.i686
  - libstdc++-devel
  - libxcb.i686
  - libxcb
  - make
  - nfs-utils
  - net-tools
  - openssh
  - smartmontools
  - sysstat
  - unixODBC
  - gcc-c++

oracle_groups:
  - { group: "{{ oracle_inventory_group }}", gid: 54321, comment: "The Oracle Inventory Group" }
  - { group: dba, gid: 54322, comment: "The OSDBA group" }
  - { group: oper, gid: 54323, comment: "The OSOPER group for Oracle Database" }
  - { group: backupdba, gid: 54324, comment: "The OSBACKUPDBA group for Oracle Database" }
  - { group: dgdba, gid: 54325, comment: "The OSDGDBA group for Oracle Data Guard" }
  - { group: kmdba, gid: 54326, comment: "The OSKMDBA group for encyption key management" }
  - { group: asmdba, gid: 54327, comment: "The OSDBA group for Oracle ASM" }
  - { group: asmoper, gid: 54328, comment: "The OSOPER group for Oracle ASM" }
  - { group: asmadmin, gid: 54320, comment: "The OSASM group for Oracle ASM Administration" }
  - { group: racdba, gid: 54330, comment: "The OSRACDBA group for oracle RAC Administration" }

oracle_users:
 - { username: "{{ oracle_user }}", uid: 54321, primgroup: "{{ oracle_inventory_group }}", othergroups: "dba,asmdba,backupdba,dgdba,kmdba,racdba,oper", comment: "Oracle Software Owner" }
grid_users:
 - { username: "{{ grid_user }}", uid: 54322, primgroup: "{{ oracle_inventory_group }}", othergroups: "dba,asmadmin,asmdba,asmoper,racdba", comment: "Grid Infrastructure Owner" }

configure_hugepages: true
configure_hugepages_by: percentage          # percentage/memory
percent_hugepages: 50                       # Percentage (0-100) of total RAM to dedicate to hugepages, Configures vm.nr_hugepages
size_in_gb_hugepages: 1                     # The amount of RAM in GB to dedicate to hugepages
nr_hugepages_percent: "{{((((percent_hugepages/100) * ansible_memtotal_mb)/2)+2)|round|int }}"
nr_hugepages_memory: "{{ (((size_in_gb_hugepages*1024)/2)+2)|round|int }}"
nr_hugepages: "{% if configure_hugepages==True%}{% if configure_hugepages_by|lower == 'percentage'%}{{ nr_hugepages_percent }}{%elif configure_hugepages_by|lower == 'memory' %}{{ nr_hugepages_memory }}{% endif %}{% else %}0{% endif %}"

oracle_hugepages:
  - { name: vm.nr_hugepages, value: "{{ nr_hugepages }}" }

oracle_directories:
  - { dir: "/u01", owner: "{{ oracle_user }}", group: "{{ oracle_inventory_group }}", mode: "u=rwx,g=rx,o=rx" }
  - { dir: "/u01/tmp", owner: "{{ oracle_user }}", group: "{{ oracle_inventory_group }}", mode: "u=rwx,g=rx,o=rx" }
  - { dir: "/u01/app", owner: "{{ grid_user }}", group: "{{ oracle_inventory_group }}", mode: "u=rwx,g=rx,o=rx" }
  - { dir: "/u01/app/grid", owner: "{{ grid_user }}", group: "{{ oracle_inventory_group }}", mode: "u=rwx,g=rx,o=rx" }
  - { dir: "/u01/app/{{ oracle_version }}/grid", owner: "{{ grid_user }}", group: "{{ oracle_inventory_group }}", mode: "u=rwx,g=rx,o=rx" }
  - { dir: "/u01/app/oracle", owner: "{{ oracle_user }}", group: "{{ oracle_inventory_group }}", mode: "u=rwx,g=rx,o=rx" }
  - { dir: "/u01/app/oracle/product/{{ oracle_version }}/dbhome_1", owner: "{{ oracle_user }}", group: "{{ oracle_inventory_group }}", mode: "u=rwx,g=rx,o=rx" }
  - { dir: "/u01/app/oraInventory", owner: "{{ oracle_user }}", group: "{{ oracle_inventory_group }}", mode: "u=rwx,g=rwx,o=rx" }
  - { dir: "/u01/software", owner: "{{ oracle_user }}", group: "{{ oracle_inventory_group }}", mode: "u=rwx,g=rwx,o=rx" }

oracle_data_directories:
  - { dir: "/u01/app/oracle/oradata/{{ oracle_sid }}/", owner: "{{ oracle_user }}", group: "{{ oracle_inventory_group }}", mode: "u=rwx,g=rx,o=rx" }
  - { dir: "/u01/app/oracle/oradata/{{ oracle_sid }}/pdbseed", owner: "{{ oracle_user }}", group: "{{ oracle_inventory_group }}", mode: "u=rwx,g=rx,o=rx" }
