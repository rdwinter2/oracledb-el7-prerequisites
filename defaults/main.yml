---

oracle_sid: orcl
oracle_uniquename: "{{ oracle_sid }}"
oracle_global_name: "{{ oracle_sid }}"
oracle_base: /u01/app/oracle
oracle_version: 12.2.0
oracle_home: "{{ oracle_base }}/product/{{ oracle_version }}/dbhome_1"

role_separation: true
oracle_user: oracle
grid_user: grid
oracle_inventory_group: oinstall

oracle_seclimits:
  - { name: 'soft nproc', value: 16384 }
  - { name: 'hard nproc', value: 16384 }
  - { name: 'soft nofile', value: 4096 }
  - { name: 'hard nofile', value: 65536 }
  - { name: 'soft stack', value: 10240 }
  - { name: 'hard stack', value: 32768 }
  - { name: 'soft memlock', value: "{{ ((0.9 * ansible_memtotal_mb)*1024)|round|int }}" }
  - { name: 'hard memlock', value: "{{ ((0.9 * ansible_memtotal_mb)*1024)|round|int }}" }

install_packages:
  # Required Oracle database packages
  - binutils
  - compat-libcap1
#  - glibc.i686
  - glibc
#  - glibc-devel.i686
  - glibc-devel
  - ksh
  - libaio.i686
  - libaio
#  - libaio-devel.i686
  - libaio-devel
#  - libX11.i686
  - libX11
#  - libXau.i686
  - libXau
#  - libXi.i686
  - libXi
#  - libXtst.i686
  - libXtst
#  - libgcc.i686
  - libgcc
#  - libstdc++.i686
  - libstdc++
#  - libstdc++-devel.i686
  - libstdc++-devel
#  - libxcb.i686
  - libxcb
  - make
  - nfs-utils
  - net-tools
  - openssh
  - smartmontools
  - sysstat
  - unixODBC
  - gcc-c++
  # for time synchronization
  - ntp
  # Packages for SELinux
  - policycoreutils
  - policycoreutils-python
  - selinux-policy
  - selinux-policy-targeted
  - libselinux-utils
  - setroubleshoot-server
  - setools
  - setools-console
  - mcstrans
  # Firerwall
  - firewalld

remove_packages:
  - aic94xx-firmware
  - iwl6000g2a-firmware
  - iwl2030-firmware
  - iwl100-firmware
  - iwl6000-firmware
  - iwl2000-firmware
  - libertas-sd8686-firmware
  - ivtv-firmware
  - libertas-usb8388-firmware
  - iwl5000-firmware
  - alsa-firmware
  - iwl6000g2b-firmware
  - iwl7260-firmware
  - libertas-sd8787-firmware
  - iwl6050-firmware
  - iwl135-firmware
  - iwl105-firmware
  - iwl1000-firmware
  - iwl5150-firmware
  - iwl4965-firmware
  - iwl3160-firmware
  - iwl3945-firmware
  - alsa-tools-firmware
  - alsa-lib
  - btrfs-progs*
  - chrony
  - cronie-anacron
  - cronie
  - crontabs
  - iptables
  - kexec-tools
  - plymouth-scripts
  - ModemManager-glib
  - NetworkManager
  - NetworkManager-glib
  - NetworkManager-tui
  - postfix
  - wpa_supplicant
  - iprutils
  - avahi

oracle_groups:
  - { group: "{{ oracle_inventory_group }}", gid: 54321, comment: "The Oracle Inventory Group" }
  - { group: dba, gid: 54322, comment: "The OSDBA group" }
  - { group: oper, gid: 54323, comment: "The OSOPER group for Oracle Database" }
  - { group: backupdba, gid: 54324, comment: "The OSBACKUPDBA group for Oracle Database" }
  - { group: dgdba, gid: 54325, comment: "The OSDGDBA group for Oracle Data Guard" }
  - { group: kmdba, gid: 54326, comment: "The OSKMDBA group for encyption key management" }
  - { group: asmdba, gid: 54327, comment: "The OSDBA group for Oracle ASM" }
  - { group: asmoper, gid: 54328, comment: "The OSOPER group for Oracle ASM" }
  - { group: asmadmin, gid: 54320, comment: "The OSASM group for Oracle ASM Administration" }
  - { group: racdba, gid: 54330, comment: "The OSRACDBA group for oracle RAC Administration" }

oracle_users:
 - { username: "{{ oracle_user }}", uid: 54321, primgroup: "{{ oracle_inventory_group }}", othergroups: "dba,asmdba,backupdba,dgdba,kmdba,racdba,oper", comment: "Oracle Software Owner" }
grid_users:
 - { username: "{{ grid_user }}", uid: 54322, primgroup: "{{ oracle_inventory_group }}", othergroups: "dba,asmadmin,asmdba,asmoper,racdba", comment: "Grid Infrastructure Owner" }

configure_hugepages: true
configure_hugepages_by: percentage          # percentage/memory
percent_hugepages: 50                       # Percentage (0-100) of total RAM to dedicate to hugepages, Configures vm.nr_hugepages
size_in_gb_hugepages: 1                     # The amount of RAM in GB to dedicate to hugepages
nr_hugepages_percent: "{{((((percent_hugepages/100) * ansible_memtotal_mb)/2)+2)|round|int }}"
nr_hugepages_memory: "{{ (((size_in_gb_hugepages*1024)/2)+2)|round|int }}"
nr_hugepages: "{% if configure_hugepages==True%}{% if configure_hugepages_by|lower == 'percentage'%}{{ nr_hugepages_percent }}{%elif configure_hugepages_by|lower == 'memory' %}{{ nr_hugepages_memory }}{% endif %}{% else %}0{% endif %}"

oracle_hugepages:
  - { name: vm.nr_hugepages, value: "{{ nr_hugepages }}" }

oracle_directories:
  - { dir: "/u01", owner: "{{ oracle_user }}", group: "{{ oracle_inventory_group }}", mode: "u=rwx,g=rx,o=rx" }
  - { dir: "/u01/tmp", owner: "{{ oracle_user }}", group: "{{ oracle_inventory_group }}", mode: "u=rwx,g=rx,o=rx" }
  - { dir: "/u01/app/oraInventory", owner: "{{ oracle_user }}", group: "{{ oracle_inventory_group }}", mode: "u=rwx,g=rwx,o=rx" }
  - { dir: "/u01/software", owner: "{{ oracle_user }}", group: "{{ oracle_inventory_group }}", mode: "u=rwx,g=rwx,o=rx" }